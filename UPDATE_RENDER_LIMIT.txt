// UPDATED renderLimitProgress function with Edit/Delete buttons
// Replace lines 117-168 in interactive-dashboard.js with this:

function renderLimitProgress(data) {
    const container = document.getElementById('limitProgress');
    const limits = dashboardData.limits.filter(l => l.period === currentPeriod);

    if (limits.length === 0) {
        container.innerHTML = `
            <div class="alert alert-info">
                <strong>ğŸ’¡ Tip:</strong> Set spending limits to track your budget! 
                Click the <strong>"âš™ï¸ Set Limits"</strong> button at the top right.
            </div>
        `;
        return;
    }

    let html = '<div class="card p-3 shadow-sm"><h6 class="mb-3">ğŸ’° Spending Limits</h6>';

    limits.forEach(limit => {
        const spent = limit.category 
            ? (data.byCategory.find(c => c.category === limit.category)?.total || 0)
            : data.total;
        
        const percentage = (spent / limit.limit_amount) * 100;
        const remaining = limit.limit_amount - spent;
        
        let statusClass = 'limit-ok';
        let statusText = 'âœ… Under Limit';
        
        if (percentage >= 100) {
            statusClass = 'limit-danger';
            statusText = 'âš ï¸ Limit Exceeded!';
        } else if (percentage >= 80) {
            statusClass = 'limit-warning';
            statusText = 'âš¡ Approaching Limit';
        }

        html += `
            <div class="mb-3 border-bottom pb-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <span><strong>${limit.category || 'Total'}</strong></span>
                    <div>
                        <span class="badge ${statusClass} me-2">${statusText}</span>
                        <button class="btn btn-sm btn-outline-primary me-1" onclick="editLimit(${limit.id}, '${limit.period}', '${limit.category || ''}', ${limit.limit_amount})" title="Edit limit">
                            âœï¸
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="deleteLimit(${limit.id})" title="Delete limit">
                            ğŸ—‘ï¸
                        </button>
                    </div>
                </div>
                <div class="progress" style="height: 25px;">
                    <div class="progress-bar ${percentage >= 100 ? 'bg-danger' : percentage >= 80 ? 'bg-warning' : 'bg-success'}" 
                         style="width: ${Math.min(percentage, 100)}%">
                        â‚¹${spent.toFixed(2)} / â‚¹${limit.limit_amount.toFixed(2)}
                    </div>
                </div>
                <small class="text-muted">
                    ${remaining > 0 ? `â‚¹${remaining.toFixed(2)} remaining` : `â‚¹${Math.abs(remaining).toFixed(2)} over limit`}
                </small>
            </div>
        `;
    });

    html += '</div>';
    container.innerHTML = html;
}
